{% extends 'blog/base.html' %}
{% load tagging_tags %}

{% load blog_tags %}
{% block title %}Search Results{% endblock %}
{% block content %}

        <div class="col-md-8">

    <div id="articles" class="row">

        <h3 class="my-4">Posts containing tag <strong>{{ query }}</strong></h3>

    {% if posts %}
        {% for post in posts %}

        <div id="article" class="col-md-12" style="margin-top: 20px; background-color: lightgrey">

            <div class="row">
                <div class="col-md-4">
                    {% if post.home_image %}
                    <img class="card-img-top img-responsive" src="{{ post.home_image }}" alt="Card image cap" style="height: 170px;width: 135px">
                {% else %}
                    <img class="card-img-top img-responsive" src="http://placehold.it/750x300" alt="Card image cap" style="height: 170px;width: 135px">
                {% endif %}
                </div>

                <div class="col-md-8">
                    <div class="row">
                        <span>
                            <span class="glyphicon glyphicon-user"></span>
                            <a href="#">{{ post.author }}</a>
                        </span>
                        <span>
                            <span class="glyphicon glyphicon-time"></span>
                            {{ post.publish_time }}
                        </span>

                    </div>


                    <div class="row">
                        <h2 class="card-title">{{ post.title }}</h2>
                        <p class="card-text">{{ post.excerpt_text|smart_excerpt:250 }}</p>
                        <a href="{{ post.get_absolute_url }}" class="btn btn-primary">Read More &rarr;</a>
                    </div>
                </div>

            </div>

        </div>
{#            <hr style="width: 100%; color: black; height: 1px; background-color:black;">#}


        {% endfor %}
    {% else %}
        <h3>No Published Articles Found</h3>
    {% endif %}

    </div>


    <div id="article-pagination" class="row" style="padding-top: 15px">
        {% if posts.paginator.num_pages %}

            <nav aria-label="">
                <ul class="pagination">

                    {% if posts.has_previous %}
                        <li>
                            <a href="{% url 'blog:post_list'  posts.previous_page_number %}"
                               aria-label="Previous">
                                <span aria-hidden="true">«</span>
                            </a>
                        </li>
                    {% else %}
                        <li class="disabled"><a href="javascript:void(0)" aria-label="Previous"><span
                                aria-hidden="true">«</span></a></li>
                    {% endif %}

                    {% for i in posts.paginator.num_pages|times %}
                        {% if i == posts.number %}
                            <li class="active"><a href="javascript:void(0)">{{ i }}<span
                                    class="sr-only">(current)</span></a></li>
                        {% else %}
                            <li><a href="{% url 'blog:post_list' i %}">{{ i }}</a></li>
                        {% endif %}
                    {% endfor %}

                    {% if posts.has_next %}
                        <li>
                            <a href="{% url 'blog:post_list'  posts.next_page_number %}" aria-label="Next">
                                <span aria-hidden="true">»</span>
                            </a>
                        </li>
                    {% else %}
                        <li class="disabled"><a href="javascript:void(0)" aria-label="Previous"><span
                                aria-hidden="true">»</span></a></li>
                    {% endif %}
                </ul>
            </nav>

        {% endif %}
    </div>


    </div>


{% endblock %}



{% block sidebar %}


    <div class="col-md-8" style="padding-top: 30px">
        <div class="row" style="background-color: lightgrey; padding-left: 20px">
            <div class="card my-8">
                <h2 class="card-header">Tags</h2>

                <ul class="list-unstyled mb-0">
                    {% for tag in all %}
                        <li>
                            <a href="{% url 'blog:tagSearch' pk=tag.name %}" style="display:inline-block">
                                <h5>{{ tag.name }}</h5></a>
                            ({{ tag.count }})
                        </li>
                    {% endfor %}

                </ul>

            </div>
        </div>


        <hr>

        <div class="row" style="background-color: lightgrey; padding-left: 20px">
            <div class="card my-8">
                <h2 class="card-header">Recent Posts</h2>
                {% show_latest_posts 3 %}
            </div>
        </div>

        <hr>
        <div class="row" style="background-color: lightgrey; padding-left: 20px">
            <div class="card my-8">
                <h2 class="card-header">Popular Posts</h2>


                {% show_popular_posts 3 %}


            </div>
        </div>
    </div>

{% endblock %}





