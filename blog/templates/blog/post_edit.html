{% extends 'blog/base.html' %}
{% block title %}Create or Edit Post{% endblock %}

{% block content %}
    <h1>New post</h1>
    <form method="POST" class="post-form">{% csrf_token %}
        {{ form.media }}



        {{ form.non_field_errors }}
<div class="fieldWrapper">
    {{ form.author.errors }}
    <label for="{{ form.author.id_for_label }}">Author:</label>
{#    {{ form.author }}#}


     <select class="" name="{{form.author.html_name }}">
                                                        <option value=""></option>
                                                        {% if request.user.is_superuser %}
                                                            {% for choice in form.author.field.choices %}
                                                                <option value="{{ choice.0 }}"
                                                                {% if form.author.id == choice.0 %}
                                                                selected{% endif %}>{{ choice.1 }}</option>
                                                            {% endfor %}
                                                            {% else %}
                                                            <option value="{{ request.user.id }}"
                                                                selected>{{ request.user }}</option>
                                                            {% endif %}
                                                    </select>

</div>
<div class="fieldWrapper">
    {{ form.title.errors }}
    <label for="{{ form.title.id_for_label }}">Title:</label>
    {{ form.title }}
</div>
<div class="fieldWrapper">
    {{ form.slug.errors }}
    <label for="{{ form.slug.id_for_label }}">Slug:</label>
    {{ form.slug }}
</div>
<div class="fieldWrapper">
    {{ form.status.errors }}
    <label for="{{ form.status.id_for_label }}">Status:</label>
    {{ form.status }}
</div>

        <div class="fieldWrapper">
    {{ form.text.errors }}
    <label for="{{ form.text.id_for_label }}">Text:</label>
    {{ form.text }}
</div>

        <div class="fieldWrapper">
    {{ form.tags.errors }}
    <label for="{{ form.tags.id_for_label }}">Tags:</label>
    {{ form.tags }}
</div>
        <div class="fieldWrapper">
    {{ form.publish.errors }}
    <label for="{{ form.publish.id_for_label }}">Publish:</label>
    {{ form.publish }}
</div>

        <button type="submit" class="save btn btn-default">Save</button>
    </form>
{% endblock %}